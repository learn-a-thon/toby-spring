# 스프링이란 무엇인가
## 8.1 스프링의 정의
스프링의 정의를 한 마디로 말하면, 자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량급 애플리케이션 프레임워크이다.
이 정의를 하나씩 풀어보면 다음과 같다.

### 애플리케이션 프레임워크
라이브러리나 프레임워크는 특정 업무 분야나 한 가지 기술에 특화된 목표를 가지고 만들어진다. 하지만 스프링은 이와 다르게 **애플리케이션 프레임워크**라는 특징을 갖고 있다.
스프링을 MVC 프레임워크 또는 ORM 지원 프레임워크라고 생각하는 것은 스프링이 다루는 일부 영역만 봤기 때문이다. 또, 스프링을 IoC/DI 프레임워크나 AOP 툴이라고 보는 이유는 스프링이 제공하는 핵심 기술에만 주목했기 때문이다. 스프링은 엔터프라이즈 애플리케이션 전 계층과 전 영역에 전략과 기능을 제공해줌으로써 애플리케이션을 편리하게 개발하게 해주는 것임을 기억하자. 

### 경량급
스프링 자체가 아주 가볍다거나 작은 규모의 코드로 이뤄졌다는 뜻은 아니다. 불필요하게 무겁지 않다는 뜻이다. (과거 EJB와 비교했을 때 불필요하고 무거운 부분을 제거함)

### 자바 엔터프라이즈 개발을 편하게
스프링은 개발자들이 스프링이라는 프레임워크가 제공하는 기술이 아니라 자신이 작성하는 애플리케이션의 로직에 더 많은 관심과 시간을 쏟게 해준다.

### 오픈소스
스프링은 여전히 오픈소스 프로젝트 방식으로 개발되고 있다. 

## 8.2 스프링의 목적
스프링의 목적은 엔터프라이즈 애플리케이션 개발을 편하게하는 것이다. 원래 엔터프라이즈 개발이란 편하지 않다.

## 8.2.1 엔터프라이즈 개발의 복잡함
 - 많은 사용자의 요청을 동시에 처리해야하기 때문에 서버의 자원을 효율적으로 공유하고 분배해서 사용할 수 있어야하낟. 
 - 보안과 안정성, 확장성  면에서도 뛰어나야한다.

## 8.2.3 복잡함을 상대하는 스프링의 전략
 - 기술에 대한 접근 방식ㅇ 일관성이 없고, 특정 환경에 종속적이다.  
 스프링이 제공하는 템플릿/콜백 패턴은 반복적인 작업 흐름과 API 사용 코드를 제거해준다. 기술을 사용하는 코드도 최적화된 핵심 로직에만 집중하도록 도와준다.
 - 기술적인 처리를 담당하는 코드가 성격이 다른 코드에 섞여서 등장한다.  
 AOP는 기술을 다루는 코드로 인한 복잡함이 기술 그 자체 이상으로 불필요하게 증대되지 않도록 도와주는 수단이다.

## 핵심 도구 : 객체지향과 DI
서비스 추상화, 템플릿/콜백, AOP 같은 스프링의 기술은 DI 없이는 존재할 수 없는 것들이다. 

## POJO와 POJO의 조건
POJO는 자바의 단순한 오브젝트를 이용해 어플리케이션의 비즈니스 로직을 구현하는 것이다. POJO는 최소한 다음 세 가지의 조건을 만족해야한다.
 - 특정 규약에 종속되지 않는다.
 - 특정 환경에 종속되지 않는다.
 - 객체지향적인 원리에 충실해야한다.

## 8.4.1 제어의 역전 / 의존관계 주입
DI를 사용하는 방식이 오브젝트를 new 키워드로 생성해서 사용하는 강한 결합을 쓰는 방법보다 나은 이유는 유연한 확장이 가능하기 때문이다. 
### DI의 활용 방법
 - `핵심 기능의 변경`  
 가장 대표적인 적용 방법은 의존 대상의 구현을 바꾸는 것이다. 디자인 패턴의 전략 패턴이 대표적이다. 하나의 DAO인터페이스를 통해 JDBC, JPA 하이버네이트 등의 변경을 사용할 수 있다. 
 - `핵심기능의 동적인 변`  
 첫 번째와 비슷하게 의존 오브젝트의 핵심 기능 자체를 바꾸는 것이다. 동적으로 매번 다르게 변경할 수도 있다. 
 - `부가기능의 추가`  
 핵심 기능은 그대로 두고 부가기능을 추가하는 것이다. 데코레이터 패턴을 생각하면된다. 
 - `인터페이스의 변경`  
 인터페이스가 클라이언트와 호환되지 않는 경우가 있다. A가 C 오브젝트를 사용하려고 하는 상황이다. 하지만 A는 원래 B 인터페이스를 사용하도록 만들어져 있과 C는 B 인터페이스를 구현하지 않았다. 이때 A가 DI를 통해 B의 구현 오브젝트를 받도록 만들어져 있다면, **B 인터페이스를 구현했으면서 내부에서 C를 호출해주는 기능을 가진 어댑터 오브젝트를 만들어 A에 DI 해주면 된다.**
 - `프록시`  
 - `템플릿과 콜백`  
 템플릿/콜백 패턴은 DI의 특별한 적용 방법이다. 반복적으로 등장하지만 항상 고정적인 작업 흐름과 그 사이에서 자주 바뀌는 부분을 분리해서 템플릿과 콜백으로 만들고 이를 DI 원리를 응용해 적용하면 지저분하게 매번 만들어야 하는 코드를 간결하게 만들 수 있다.  
 - `싱글톤과 오브젝트 스코프`  
 스프링의 DI는 기본적으로 싱글톤으로 오브젝트르 만들어서 사용하게 한다. 컨테이너가 알아서 싱글톤을 만들고 관리하기 때문에 클래스 자체는 싱글톤을 고려하지 않고 자유롭게 설계해도 된다는 장점이 있다. 
 - 테스트  
 오브젝트를 효과적으로 테스트하는 방법은 가능한 한 고립시키는 것이다. 즉, 다른 오브젝트와의 사이에서 일어나는 일을 테스트를 위해 조작할 수 있도록 만든다. 그래야만 테스트 대상인 오브젝트의 기능에 충실하게 테스트가 가능하다. 

 ## 8.4.2 애스펙트 지향 프로그래밍
 AOP는 객체지향 기술의 한계와 단점을 극복하도록 도와주는 보조적인 프로개르매이 기술이다. 
 
 ### AOP 적용 기법
  - 스프링과 같이 다이내믹프록시를 사용하는 방법  
  기존 코드에 영향을 주지 않고 부가기능을 적용하게 해주는 데코레이터 패턴을 응용한 것.  
  - 자바 언어의 한계를 넘어서는 언어의 확장을 이용하는 방법  
  AspectJ는 메소드 호출뿐 아니라 인스턴스 생성, 필드 엑세스, 특정 호출경로를 가진 메소드 호출 등에도 부가기능을 제공할 수 있다. 

### AOP 적용 단계
AOP를 남발해서 사용하다 보면 다른 개발자가 만든 코드가 예상하지 않은 방식으로 돌아가는 등의 혼란을 초래할 수 있다.
 - 미리 준비된 AOP 이용  
 스프링에서 직접 제공하는 트랜잭션이나 @Congifurable곽 같은 AOP 기능을 이용한다.
 - 전담팀을 통한 정책 AOP 이용  
 소수의 AOP 담당자 관리하에 적용한다. 오브젝트에 대한 보안, 특정 계층의 오브젝트 이용 전후의 작업 기록을 남기는 로깅, 데이터 추적을 위한 트레이싱, 특정 구간의 실시간 성능 모니터링과 같은 기능에 AOP를 이용한다. 
 - AOP의 자유로운 이용  
 AOP에 친숙해지고 장단점, 응용전략, 위험성 등을 인지했다고 스스로 AOP를 활용할 수 있는 단계로 넘어갈 수 있다.